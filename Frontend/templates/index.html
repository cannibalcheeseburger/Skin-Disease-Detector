<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 col-md-6 p-2 offset-md-3">
                <h1 class="text-center p-5">Skin Disease Detection</h1>
                <h3 class="text-center p-5">Diagnosis from Images</h3>
            </div>
            <div
                class="row col-12 col-md-6 p-2 offset-md-3 d-flex justify-content-center align-items-end border border-dark rounded">
                <label class="col-6 text-center" for="image_file">Upload an image:</label>
                <input class="btn btn-warning col-5 overflow-hidden" type="file" id="image_file" name="myfile">

                <button class="btn btn-success col-6 mt-5" onclick="predictImage()"> Diagnose </button>
            </div>


        </div>
    </div>
</body>

<script>
    function predictImage() {
        var files = document.getElementById("image_file").files
        var formData = new FormData();
        var endpoint = '/predict';
        formData.append('image', files[0])

        $.ajax({
            type: 'POST',
            url: endpoint,
            data: formData,
            contentType: false,
            cache: false,
            processData: false,
            success: function (data) {

                swal({
                    title: data[0].name,
                    text: data[1].detail,
                    icon: "info",
                })
            }
        });
    }
</script>